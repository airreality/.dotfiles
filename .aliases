# dirs
alias b="cd ~/BashProjects/"
alias p="cd ~/PythonProjects/"

# scripts
alias hi="python ~/PythonProjects/QATS/qats.py hello"
alias wtime="python ~/PythonProjects/WORKTIME/time.py"
alias lenses="python ~/PythonProjects/Lenses/lenses.py"

# system
alias diff="colordiff"
alias opti="optirun -c :8"
alias space="xfconf-query -c xfwm4 -p /general/workspace_count -s"
alias venv='source venv/bin/activate > /dev/null 2>&1 || \
            source env/bin/activate > /dev/null 2>&1 || \
            (echo "No env. Create?"
            read create
            if [[ "$create" == "y" ]]; then
                python3 -m virtualenv venv
            fi)'
alias weather="curl wttr.in"
alias vim="nvim"

function cheat {
    curl cheat.sh/$1
}

# colours
alias ls="ls --color=auto"
alias grep="grep --colour=auto"
alias egrep="egrep --colour=auto"
alias fgrep="fgrep --colour=auto"

# docker
alias dls="docker image ls --format='{{.ID}}\t{{.Repository}}'"

function dbash {
    docker exec -it $@ bash
}

function dps {
    if [ $# -eq 0 ]; then
        docker ps --format='{{.ID}}\t{{.Names}}'
    else
        args=""
        filter=".*"
        for arg in $@; do
            filter="${filter}${arg}.*"
        done
        docker ps ${args} -q --filter "name=$filter"
    fi
}

function dgo {
    if [ $# -eq 0 ]; then
        echo "No args"
    else
        container=$(dps $@)
        if [ -z $container ]; then
            echo "No such container"
        elif [ $(echo $container | wc -l) -gt 1 ]; then
            echo "Ambigious query"
        else
            dbash $container
        fi
    fi
}

function drm {
    if [ $(docker ps | wc -l) -ge 2 ]; then
        docker kill $(docker ps --format={{.ID}})
    fi
    if [ $(docker ps -a | wc -l) -ge 2 ]; then
        docker rm $(docker ps -a --format={{.ID}})
    fi
}

function dirm {
    if [ $(docker image ls | wc -l) -ge 2 ]; then
        docker image rm  $(docker image ls --format={{.ID}})
    fi
}
